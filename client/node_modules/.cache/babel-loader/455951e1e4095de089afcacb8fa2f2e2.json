{"ast":null,"code":"import axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport setAuthToken from '../utils/setAuthToken';\nimport { GET_ERROR, SET_CURRENT_USER } from './types';\nexport const registerUser = (userData, history) => dispatch => {\n  axios.post('/api/users/register', userData).then(res => history.push('/login')).catch(err => dispatch({\n    type: GET_ERROR,\n    payload: err.response.data\n  }));\n};\nexport const loginUser = (userData, history) => dispatch => {\n  axios.post('/api/users/login', userData).then(res => {\n    // Get user token and save to localStorage\n    const token = res.data.token;\n    localStorage.setItem('jwtToken', token); // sSet token to Auth header\n\n    setAuthToken(token); // Decode token to get user data\n\n    const decoded = jwt_decode(token); // Set current user\n\n    dispatch(setCurrentUser(decoded));\n  }).catch(err => console.log(err) // dispatch({\n  //     type: GET_ERROR,\n  //     payload: err.response.data\n  // })\n  );\n}; // Set logged in user\n\nexport const setCurrentUser = decoded => {\n  return {\n    test: SET_CURRENT_USER,\n    payload: decoded\n  };\n};","map":{"version":3,"sources":["/Users/alan2305/Documents/project/hackeresume/client/src/actions/auth.js"],"names":["axios","jwt_decode","setAuthToken","GET_ERROR","SET_CURRENT_USER","registerUser","userData","history","dispatch","post","then","res","push","catch","err","type","payload","response","data","loginUser","token","localStorage","setItem","decoded","setCurrentUser","console","log","test"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,SAASC,SAAT,EAAoBC,gBAApB,QAA4C,SAA5C;AAEA,OAAO,MAAMC,YAAY,GAAG,CAACC,QAAD,EAAWC,OAAX,KAAuBC,QAAQ,IAAI;AAC3DR,EAAAA,KAAK,CACAS,IADL,CACU,qBADV,EACiCH,QADjC,EAEKI,IAFL,CAEUC,GAAG,IAAIJ,OAAO,CAACK,IAAR,CAAa,QAAb,CAFjB,EAGKC,KAHL,CAGWC,GAAG,IACNN,QAAQ,CAAC;AACLO,IAAAA,IAAI,EAAEZ,SADD;AAELa,IAAAA,OAAO,EAAEF,GAAG,CAACG,QAAJ,CAAaC;AAFjB,GAAD,CAJhB;AASH,CAVM;AAaP,OAAO,MAAMC,SAAS,GAAG,CAACb,QAAD,EAAWC,OAAX,KAAuBC,QAAQ,IAAI;AACxDR,EAAAA,KAAK,CACAS,IADL,CACU,kBADV,EAC8BH,QAD9B,EAEKI,IAFL,CAEUC,GAAG,IAAI;AACT;AADS,UAEDS,KAFC,GAEST,GAAG,CAACO,IAFb,CAEDE,KAFC;AAGTC,IAAAA,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCF,KAAjC,EAHS,CAIT;;AACAlB,IAAAA,YAAY,CAACkB,KAAD,CAAZ,CALS,CAMT;;AACA,UAAMG,OAAO,GAAGtB,UAAU,CAACmB,KAAD,CAA1B,CAPS,CAQT;;AACAZ,IAAAA,QAAQ,CAACgB,cAAc,CAACD,OAAD,CAAf,CAAR;AACH,GAZL,EAaKV,KAbL,CAaWC,GAAG,IACNW,OAAO,CAACC,GAAR,CAAYZ,GAAZ,CAdR,CAeQ;AACA;AACA;AACA;AAlBR;AAoBH,CArBM,C,CAuBP;;AACA,OAAO,MAAMU,cAAc,GAAGD,OAAO,IAAI;AACrC,SAAO;AACHI,IAAAA,IAAI,EAAEvB,gBADH;AAEHY,IAAAA,OAAO,EAAEO;AAFN,GAAP;AAIH,CALM","sourcesContent":["import axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport setAuthToken from '../utils/setAuthToken';\nimport { GET_ERROR, SET_CURRENT_USER } from './types';\n\nexport const registerUser = (userData, history) => dispatch => {\n    axios\n        .post('/api/users/register', userData)\n        .then(res => history.push('/login'))\n        .catch(err => \n            dispatch({\n                type: GET_ERROR,\n                payload: err.response.data\n            })\n        );\n};\n\n\nexport const loginUser = (userData, history) => dispatch => {\n    axios\n        .post('/api/users/login', userData)\n        .then(res => {\n            // Get user token and save to localStorage\n            const { token } = res.data;\n            localStorage.setItem('jwtToken', token);\n            // sSet token to Auth header\n            setAuthToken(token);\n            // Decode token to get user data\n            const decoded = jwt_decode(token);\n            // Set current user\n            dispatch(setCurrentUser(decoded));\n        })\n        .catch(err => \n            console.log(err)\n            // dispatch({\n            //     type: GET_ERROR,\n            //     payload: err.response.data\n            // })\n        );\n};\n\n// Set logged in user\nexport const setCurrentUser = decoded => {\n    return {\n        test: SET_CURRENT_USER,\n        payload: decoded\n    }\n}"]},"metadata":{},"sourceType":"module"}